"use strict";(globalThis.webpackChunk_openmrs_esm_patient_chart_app=globalThis.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[4386],{5547:(t,i,e)=>{e.d(i,{Y:()=>a});var n=e(1083),l=e(9981),s=e(3150),r=e(1343);function o(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function a(t,i){var e,a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},c=(0,l.e4)(t).mutateVisits,v=(0,n.useVisit)(t).mutate,y=(e=(0,r.useState)(!1),a=2,function(t){if(Array.isArray(t))return t}(e)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,l,s=[],r=!0,o=!1;try{for(e=e.call(t);!(r=(n=e.next()).done)&&(s.push(n.value),!i||s.length!==i);r=!0);}catch(t){o=!0,l=t}finally{try{r||null==e.return||e.return()}finally{if(o)throw l}}return s}}(e,a)||function(t,i){if(t){if("string"==typeof t)return o(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,i):void 0}}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=y[0],p=y[1],m=(0,s.useTranslation)().t,h=function(){(0,l.uA)(null==i?void 0:i.uuid).then((function(){var t,e;(0,n.showSnackbar)({title:m("visitRestored","Visit restored"),subtitle:m("visitRestoredSuccessfully","{{visit}} restored successfully",{visit:null!==(e=null==i||null===(t=i.visitType)||void 0===t?void 0:t.display)&&void 0!==e?e:m("visit","Visit")}),kind:"success"}),c(),v(),null==d||d()})).catch((function(){var t,e;(0,n.showSnackbar)({title:m("visitNotRestored","Visit couldn't be restored"),subtitle:m("errorWhenRestoringVisit","Error occured when restoring {{visit}}",{visit:null!==(e=null==i||null===(t=i.visitType)||void 0===t?void 0:t.display)&&void 0!==e?e:m("visit","Visit")}),kind:"error"})}))};return{initiateDeletingVisit:function(){p(!0);var t=!(null==i?void 0:i.stopDatetime);(0,l.TH)(null==i?void 0:i.uuid).then((function(){var e,l,s,r,o,a;c(),v(),t?(0,n.showSnackbar)({title:m("visitCancelled","Visit cancelled"),subtitle:m("visitCancelSuccessMessage","Active {{visit}} cancelled successfully",{visit:null!==(l=null==i||null===(e=i.visitType)||void 0===e?void 0:e.display)&&void 0!==l?l:m("visit","Visit")}),isLowContrast:!0,kind:"success"}):(0,n.showActionableNotification)({title:m("visitDeleted","{{visit}} deleted",{visit:null!==(o=null==i||null===(s=i.visitType)||void 0===s?void 0:s.display)&&void 0!==o?o:m("visit","Visit")}),subtitle:m("visitDeletedSuccessfully","{{visit}} deleted successfully",{visit:null!==(a=null==i||null===(r=i.visitType)||void 0===r?void 0:r.display)&&void 0!==a?a:m("visit","Visit")}),kind:"success",actionButtonLabel:m("undo","Undo"),onActionButtonClick:h}),null==u||u()})).catch((function(){(0,n.showSnackbar)({title:t?m("errorCancellingVisit","Error cancelling active visit"):m("errorDeletingVisit","Error deleting visit"),kind:"error",subtitle:m("errorOccuredDeletingVisit","An error occured when deleting visit")})})).finally((function(){p(!1)}))},isDeletingVisit:f}}},4386:(t,i,e)=>{e.r(i),e.d(i,{default:()=>d});var n=e(1343),l=e.n(n),s=e(5198),r=e(3150),o=e(1083),a=e(5927),u=e(5547);const d=function(t){var i,e,n=t.closeModal,d=t.patientUuid,c=t.visit,v=(0,r.useTranslation)().t,y=(0,u.Y)(d,c,n),f=y.isDeletingVisit,p=y.initiateDeletingVisit;return l().createElement("div",null,l().createElement(s.ModalHeader,{closeModal:n,label:v("visit","Visit"),title:v("deleteVisitDialogHeader","Are you sure you want to delete this visit?")}),l().createElement(s.ModalBody,null,l().createElement("p",{className:a.A.body},v("confirmDeletingVisitTextWithStartAndEndDate","Are you sure you want to delete {{visit}} which started {{visitStartDate}} and ended {{visitEndDate}}?",{visit:null!==(e=null==c||null===(i=c.visitType)||void 0===i?void 0:i.display)&&void 0!==e?e:v("visit","Visit"),visitStartDate:(0,o.formatDatetime)(new Date(null==c?void 0:c.startDatetime),{mode:"standard"}),visitEndDate:(0,o.formatDatetime)(new Date(null==c?void 0:c.stopDatetime),{mode:"standard"})}),l().createElement("br",null),v("deletingVisitWillDeleteEncounters","Deleting this visit will delete all associated encounters."))),l().createElement(s.ModalFooter,null,l().createElement(s.Button,{kind:"secondary",onClick:n},v("cancel","Cancel")),l().createElement(s.Button,{kind:"danger",onClick:p,disabled:f},f?l().createElement(s.InlineLoading,{description:v("deletingVisit","Deleting visit")}):v("deleteVisit","Delete visit"))))}}}]);