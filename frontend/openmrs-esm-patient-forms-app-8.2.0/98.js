"use strict";(globalThis.webpackChunk_openmrs_esm_patient_forms_app=globalThis.webpackChunk_openmrs_esm_patient_forms_app||[]).push([[98],{7334:(e,n,r)=>{r.d(n,{A:()=>i});var t=r(5836),o=r.n(t),a=r(8023),s=r.n(a)()(o());s.push([e.id,".-esm-patient-forms__html-form-entry-wrapper__wrapper___bkx4M{width:95%;border:none;margin:0;padding:0;display:none}","",{version:3,sources:["webpack://./src/htmlformentry/html-form-entry-wrapper.scss"],names:[],mappings:"AAAA,8DACE,SAAA,CACA,WAAA,CACA,QAAA,CACA,SAAA,CACA,YAAA",sourcesContent:[".wrapper {\n  width: 95%;\n  border: none;\n  margin: 0;\n  padding: 0;\n  display: none;\n}\n"],sourceRoot:""}]),s.locals={wrapper:"-esm-patient-forms__html-form-entry-wrapper__wrapper___bkx4M"};const i=s},5098:(e,n,r)=>{r.r(n),r.d(n,{default:()=>k});var t=r(1343),o=r.n(t),a=r(6966),s=r(111),i=r.n(s),l=r(5660),c=r.n(l),u=r(3824),m=r.n(u),p=r(8823),d=r.n(p),f=r(6747),A=r.n(f),v=r(4072),h=r.n(v),g=r(7334),w={};w.styleTagTransform=h(),w.setAttributes=d(),w.insert=m().bind(null,"head"),w.domAPI=c(),w.insertStyleElement=A(),i()(g.A,w);const _=g.A&&g.A.locals?g.A.locals:void 0,C=function(e){var n=e.closeWorkspaceWithSavedChanges,r=e.src,a=(0,t.useRef)();(0,t.useEffect)((function(){var e=function(e){return"close-workspace"===(null==e?void 0:e.data)&&n()};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[n]);var s=(0,t.useCallback)((function(){var e,n,r,t=a.current,o=a.current.contentDocument;null===(e=o.querySelector("header"))||void 0===e||e.remove(),null===(n=o.querySelector(".patient-header"))||void 0===n||n.remove(),null===(r=o.querySelector("#breadcrumbs"))||void 0===r||r.remove(),t.style.display="block",t.height=o.body.scrollHeight+50+"px"}),[]);return o().createElement("div",null,o().createElement("iframe",{ref:a,src:r,className:_.wrapper,onLoad:s}))};var b=r(1083),y=r(3150);const k=function(e){var n,r=e.patientUuid,t=e.closeWorkspaceWithSavedChanges,s=e.promptBeforeClosing,i=e.setCancelTitle,l=e.setCancelMessage,c=e.setCancelConfirmText,u=e.formInfo,m=(0,y.useTranslation)().t,p=(0,b.usePatient)(r).patient,d=(0,a.useVisitOrOfflineVisit)(r).currentVisit,f=u||{},A=f.encounterUuid,v=f.visitUuid,h=f.htmlForm;s((function(){return!0})),i(m("warning","Warning")),l(m("closeHtmlFormWarning","Please use the Save or Cancel button on the form to close the form.")),c(m("ignoreWarning","Ignore Warning"));var g,w="".concat(window.openmrsBase,"/htmlformentryui/htmlform/").concat(h.formUiPage,".page?patientId=").concat(r,"&visitId=").concat(null!==(n=null!=v?v:null==d?void 0:d.uuid)&&void 0!==n?n:null,"&definitionUiResource=").concat(h.formUiResource,"&returnUrl=post-message:close-workspace"),_="".concat(window.openmrsBase,"/htmlformentryui/htmlform/").concat(h.formEditUiPage,".page?patientId=").concat(r,"&visitId=").concat(null!==(g=null!=v?v:null==d?void 0:d.uuid)&&void 0!==g?g:null,"&encounterId=").concat(A,"&definitionUiResource=").concat(h.formUiResource,"&returnUrl=post-message:close-workspace"),k=u&&r&&p;return o().createElement("div",null,k&&o().createElement(C,{src:A?_:w,closeWorkspaceWithSavedChanges:t}))}}}]);