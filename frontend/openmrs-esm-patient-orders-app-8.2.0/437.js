"use strict";(globalThis.webpackChunk_openmrs_esm_patient_orders_app=globalThis.webpackChunk_openmrs_esm_patient_orders_app||[]).push([[437],{783:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(5836),a=t.n(r),o=t(8023),i=t.n(o)()(a());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--bottom-nav-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-orders__lab-results-form__heading___fTKub{margin-bottom:1rem}.-esm-patient-orders__lab-results-form__loaderContainer___U\\+oN\\+{display:flex;justify-content:center;align-items:center;height:100%}.-esm-patient-orders__lab-results-form__loader___4SdWS{height:100%;justify-content:center;align-items:center}.-esm-patient-orders__lab-results-form__sectionTitle___Yxa21{margin-bottom:.75rem}.-esm-patient-orders__lab-results-form__modalBody___-xpgg{padding-bottom:1rem}.-esm-patient-orders__lab-results-form__textInput___Pl9Tk{margin:.25rem 0 1rem}.-esm-patient-orders__lab-results-form__errorDiv___cihR1{color:#da1e28}.-esm-patient-orders__lab-results-form__button___95KrO{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-orders__lab-results-form__button___95KrO .cds--inline-loading{min-height:1rem !important}.-esm-patient-orders__lab-results-form__button___95KrO .cds--inline-loading__text{font-size:unset !important}.-esm-patient-orders__lab-results-form__tablet___LLfFY{padding:1.5rem 1rem;background-color:#fff}.-esm-patient-orders__lab-results-form__desktop___pvHvx{padding:0}.-esm-patient-orders__lab-results-form__form___6Ln0z{display:flex;flex-direction:column;justify-content:space-between;height:100%}.omrs-breakpoint-lt-desktop .-esm-patient-orders__lab-results-form__form___6Ln0z{background-color:#ededed}.omrs-breakpoint-gt-tablet .-esm-patient-orders__lab-results-form__form___6Ln0z{background-color:#fff}.-esm-patient-orders__lab-results-form__grid___OK2fB{margin:1rem}.-esm-patient-orders__lab-results-form__row___jNFFF{margin:.5rem 0 0;display:flex;flex-flow:row wrap;gap:1rem}.-esm-patient-orders__lab-results-form__spacer___oWMw9{margin-top:1rem}.-esm-patient-orders__lab-results-form__emptyFormError___zemKE{margin:.625rem 0}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/lab-results/lab-results-form.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,oGAAA,CACA,2GAAA,CCvDF,wDACE,kBC0BW,CDvBb,kEACE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,WAAA,CAGF,uDACE,WAAA,CACA,sBAAA,CACA,kBAAA,CAGF,6DACE,oBCIW,CDDb,0DACE,mBCKW,CDFb,0DACE,oBAAA,CAGF,yDACE,aDdO,CCiBT,uDACE,WCkBW,CDjBX,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAEA,4EACE,0BAAA,CAGF,kFACE,0BAAA,CAIJ,uDACE,mBAAA,CACA,qBDtDM,CCyDR,wDACE,SAAA,CAGF,qDACE,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,WAAA,CAGF,iFACE,wBAAA,CAGF,gFACE,qBDzEM,CC4ER,qDACE,WC/CW,CDkDb,oDACE,gBAAA,CACA,YAAA,CACA,kBAAA,CACA,QCtDW,CDyDb,uDACE,eC1DW,CD6Db,+DACE,gBAAA",sourcesContent:["$ui-01: #f4f4f4;\n$ui-02: #ffffff;\n$ui-03: #e0e0e0;\n$ui-04: #8d8d8d;\n$ui-05: #161616;\n$text-02: #525252;\n$text-03: #a8a8a8;\n$ui-background: #ffffff;\n$color-gray-30: #c6c6c6;\n$color-gray-70: #525252;\n$color-gray-100: #161616;\n$color-blue-60-2: #0f62fe;\n$color-blue-10: #edf5ff;\n$color-yellow-50: #feecae;\n$carbon--red-50: #fa4d56;\n$inverse-link: #78a9ff;\n$support-02: #24a148;\n$inverse-support-03: #f1c21b;\n$warning-background: #fff8e1;\n$openmrs-background-grey: #f4f4f4;\n$danger: #da1e28;\n$interactive-01: #0f62fe;\n$field-01: #f4f4f4;\n$grey-2: #e0e0e0;\n$labeldropdown: #c6c6c6;\n\n$brand-primary-10: #d9fbfb;\n$brand-primary-20: #9ef0f0;\n$brand-primary-30: #3ddbd9;\n$brand-primary-40: #08bdba;\n$brand-primary-50: #009d9a;\n\n/* 60,70 and 80 are already declared as brand-01, 02 and 03 respectively */\n\n$brand-primary-90: #022b30;\n$brand-primary-100: #081a1c;\n\n@mixin brand-01($property) {\n  #{$property}: #005d5d;\n  #{$property}: var(--brand-01);\n}\n\n@mixin brand-02($property) {\n  #{$property}: #004144;\n  #{$property}: var(--brand-02);\n}\n\n@mixin brand-03($property) {\n  #{$property}: #007d79;\n  #{$property}: var(--brand-03);\n}\n\n:root {\n  --brand-01: #005d5d;\n  --brand-02: #004144;\n  --brand-03: #007d79;\n  --bottom-nav-height: 4rem;\n  --workspace-header-height: 3rem;\n  --tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--bottom-nav-height));\n  --desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height));\n}\n\n$breakpoint-phone-min: 0px;\n$breakpoint-phone-max: 600px;\n$breakpoint-tablet-min: 601px;\n$breakpoint-tablet-max: 1023px;\n$breakpoint-small-desktop-min: 1024px;\n$breakpoint-small-desktop-max: 1439px;\n$breakpoint-large-desktop-min: 1440px;\n$breakpoint-large-desktop-max: 99999999px;\n\n/* These color variables will be removed in a future release */\n$brand-teal-01: #007d79;\n$brand-01: #005d5d;\n$brand-02: #004144;\n","@use '@carbon/layout';\n@use '@carbon/type';\n@use '@openmrs/esm-styleguide/src/vars' as *;\n\n.heading {\n  margin-bottom: layout.$spacing-05;\n}\n\n.loaderContainer {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n\n.loader {\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n}\n\n.sectionTitle {\n  margin-bottom: layout.$spacing-04;\n}\n\n.modalBody {\n  padding-bottom: layout.$spacing-05;\n}\n\n.textInput {\n  margin: layout.$spacing-02 0 layout.$spacing-05;\n}\n\n.errorDiv {\n  color: $danger;\n}\n\n.button {\n  height: layout.$spacing-10;\n  display: flex;\n  align-content: flex-start;\n  align-items: baseline;\n  min-width: 50%;\n\n  :global(.cds--inline-loading) {\n    min-height: layout.$spacing-05 !important;\n  }\n\n  :global(.cds--inline-loading__text) {\n    font-size: unset !important;\n  }\n}\n\n.tablet {\n  padding: layout.$spacing-06 layout.$spacing-05;\n  background-color: $ui-02;\n}\n\n.desktop {\n  padding: 0;\n}\n\n.form {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n}\n\n:global(.omrs-breakpoint-lt-desktop) .form {\n  background-color: #ededed;\n}\n\n:global(.omrs-breakpoint-gt-tablet) .form {\n  background-color: $ui-02;\n}\n\n.grid {\n  margin: layout.$spacing-05;\n}\n\n.row {\n  margin: layout.$spacing-03 0 0;\n  display: flex;\n  flex-flow: row wrap;\n  gap: layout.$spacing-05;\n}\n\n.spacer {\n  margin-top: layout.$spacing-05;\n}\n\n.emptyFormError {\n  margin: 0.625rem 0;\n}\n","// Code generated by @carbon/layout. DO NOT EDIT.\n//\n// Copyright IBM Corp. 2018, 2023\n//\n// This source code is licensed under the Apache-2.0 license found in the\n// LICENSE file in the root directory of this source tree.\n//\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-01: 0.125rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-02: 0.25rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-03: 0.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-04: 0.75rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-05: 1rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-06: 1.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-07: 2rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-08: 2.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-09: 3rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-10: 4rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-11: 5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-12: 6rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-13: 10rem !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/layout\n$spacing: (\n  spacing-01: $spacing-01,\n  spacing-02: $spacing-02,\n  spacing-03: $spacing-03,\n  spacing-04: $spacing-04,\n  spacing-05: $spacing-05,\n  spacing-06: $spacing-06,\n  spacing-07: $spacing-07,\n  spacing-08: $spacing-08,\n  spacing-09: $spacing-09,\n  spacing-10: $spacing-10,\n  spacing-11: $spacing-11,\n  spacing-12: $spacing-12,\n  spacing-13: $spacing-13,\n);\n"],sourceRoot:""}]),i.locals={heading:"-esm-patient-orders__lab-results-form__heading___fTKub",loaderContainer:"-esm-patient-orders__lab-results-form__loaderContainer___U+oN+",loader:"-esm-patient-orders__lab-results-form__loader___4SdWS",sectionTitle:"-esm-patient-orders__lab-results-form__sectionTitle___Yxa21",modalBody:"-esm-patient-orders__lab-results-form__modalBody___-xpgg",textInput:"-esm-patient-orders__lab-results-form__textInput___Pl9Tk",errorDiv:"-esm-patient-orders__lab-results-form__errorDiv___cihR1",button:"-esm-patient-orders__lab-results-form__button___95KrO",tablet:"-esm-patient-orders__lab-results-form__tablet___LLfFY",desktop:"-esm-patient-orders__lab-results-form__desktop___pvHvx",form:"-esm-patient-orders__lab-results-form__form___6Ln0z",grid:"-esm-patient-orders__lab-results-form__grid___OK2fB",row:"-esm-patient-orders__lab-results-form__row___jNFFF",spacer:"-esm-patient-orders__lab-results-form__spacer___oWMw9",emptyFormError:"-esm-patient-orders__lab-results-form__emptyFormError___zemKE"};const l=i},5437:(e,n,t)=>{t.r(n),t.d(n,{default:()=>T});var r=t(1343),a=t.n(r),o=t(3150),i=t(824),l=t(8917),s=t(7574),u=t(1083),c=t(579),d=t(111),p=t.n(d),m=t(5660),b=t.n(m),f=t(3824),_=t.n(f),g=t(8823),y=t.n(g),A=t(6747),v=t.n(A),h=t(4072),C=t.n(h),$=t(783),k={};k.styleTagTransform=C(),k.setAttributes=y(),k.insert=_().bind(null,"head"),k.domAPI=b(),k.insertStyleElement=v(),p()($.A,k);const E=$.A&&$.A.locals?$.A.locals:void 0;function w(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){w(e,n,t[n])}))}return e}function D(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n.push.apply(n,t)}return n}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}const N=function(e){var n=e.concept,t=e.control,r=e.defaultValue,l=(0,o.useTranslation)().t,u=function(e){var n;return"Coded"===(null===(n=e.datatype)||void 0===n?void 0:n.display)},c=function(e){var n;return"Numeric"===(null===(n=e.datatype)||void 0===n?void 0:n.display)},d=function(e){var n;return"Text"===(null===(n=e.datatype)||void 0===n?void 0:n.display)},p=function(e){var n;if("Numeric"===(null==e||null===(n=e.datatype)||void 0===n?void 0:n.display)){var t,r=Math.max(null==e?void 0:e.hiAbsolute,null==e?void 0:e.hiCritical,null==e?void 0:e.hiNormal),a=Math.min(null==e?void 0:e.lowAbsolute,null==e?void 0:e.lowCritical,null==e?void 0:e.lowNormal);return" (".concat(null!=a?a:0," - ").concat(r>0?r:"--"," ").concat(null!==(t=null==e?void 0:e.units)&&void 0!==t?t:"",")")}return""};return a().createElement(a().Fragment,null,d(n)&&a().createElement(i.xI,{control:t,name:n.uuid,render:function(e){var t,r=e.field;return a().createElement(s.ksK,x({className:E.textInput,id:n.uuid,key:n.uuid,labelText:null!==(t=null==n?void 0:n.display)&&void 0!==t?t:"",type:"text"},r))}}),c(n)&&a().createElement(i.xI,{control:t,name:n.uuid,render:function(e){var t=e.field;return a().createElement(s.Q7x,{allowEmpty:!0,className:E.numberInput,disableWheel:!0,hideSteppers:!0,id:n.uuid,key:n.uuid,label:(null==n?void 0:n.display)+p(n),onChange:function(e){return t.onChange(e.target.value)},value:t.value||""})}}),u(n)&&a().createElement(i.xI,{name:n.uuid,control:t,render:function(e){var t,o,i,u=e.field;return a().createElement(s.l6P,D(x({},u),{className:E.textInput,defaultValue:null==r||null===(t=r.value)||void 0===t?void 0:t.uuid,id:"select-".concat(n.uuid),key:n.uuid,labelText:null==n?void 0:n.display}),a().createElement(s.ebT,{text:l("chooseAnOption","Choose an option"),value:""}),(null==n||null===(o=n.answers)||void 0===o?void 0:o.length)&&(null==n||null===(i=n.answers)||void 0===i?void 0:i.map((function(e){return a().createElement(s.ebT,{key:e.uuid,text:e.display,value:e.uuid},e.display)}))))}}),function(e){var n;return(null===(n=e.setMembers)||void 0===n?void 0:n.length)>0}(n)&&n.setMembers.map((function(e){return a().createElement(a().Fragment,{key:e.uuid},d(e)&&a().createElement(i.xI,{control:t,name:e.uuid,render:function(n){var t,r=n.field;return a().createElement(s.ksK,D(x({},r),{id:"text-".concat(e.uuid),className:E.textInput,key:e.uuid,labelText:null!==(t=null==e?void 0:e.display)&&void 0!==t?t:"",type:"text"}))}}),c(e)&&a().createElement(i.xI,{control:t,name:e.uuid,render:function(n){var t=n.field;return a().createElement(s.Q7x,{allowEmpty:!0,className:E.numberInput,disableWheel:!0,hideSteppers:!0,id:"number-".concat(e.uuid),key:e.uuid,label:(null==e?void 0:e.display)+p(e),onChange:function(e){return t.onChange(e.target.value)},value:t.value||""})}}),u(e)&&a().createElement(i.xI,{name:e.uuid,control:t,render:function(n){var t,o,i,u,c,d,p,m,b=n.field;return a().createElement(s.l6P,D(x({},b),{className:E.textInput,defaultValue:(o=e.uuid,i=e.datatype.display,"Coded"===i?null==r||null===(d=r.groupMembers)||void 0===d||null===(c=d.find((function(e){return e.concept.uuid===o})))||void 0===c||null===(u=c.value)||void 0===u?void 0:u.uuid:null==r||null===(m=r.groupMembers)||void 0===m||null===(p=m.find((function(e){return e.concept.uuid===o})))||void 0===p?void 0:p.value),id:"select-".concat(e.uuid),key:e.uuid,labelText:null==e?void 0:e.display,type:"text"}),a().createElement(s.ebT,{text:l("chooseAnOption","Choose an option"),value:""}),null==e||null===(t=e.answers)||void 0===t?void 0:t.map((function(e){return a().createElement(s.ebT,{key:e.uuid,text:e.display,value:e.uuid},e.display)})))}}))})))};function B(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function O(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void t(e)}l.done?n(s):Promise.resolve(s).then(r,a)}function S(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return B(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?B(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const T=function(e){var n=e.closeWorkspace,t=e.closeWorkspaceWithSavedChanges,d=e.order,p=e.promptBeforeClosing,m=(0,o.useTranslation)().t,b=(0,u.useAbortController)(),f="tablet"===(0,u.useLayoutType)(),_=S((0,r.useState)(""),2),g=_[0],y=_[1],A=S((0,r.useState)(!1),2),v=A[0],h=A[1],C=S((0,r.useState)(null),2),$=C[0],k=C[1],w=S((0,r.useState)(!1),2),x=w[0],D=w[1],B=(0,c.oi)(d.concept.uuid),T=B.concept,F=B.isLoading,I=(0,c.W4)(d.encounter.uuid),j=I.encounter,L=I.isLoading,W=I.mutate,M=(0,c.aB)(g),P=M.data,K=M.isLoading,G=(M.error,S((0,r.useState)(!1),2)),z=G[0],R=G[1],V=(0,i.mN)({defaultValues:{}}),Y=V.control,q=(V.register,V.formState),H=(q.errors,q.isDirty),U=q.isSubmitting,Q=V.getValues,J=V.handleSubmit;return(0,r.useEffect)((function(){if(!L&&(null==j?void 0:j.obs.length)>0&&!v){var e=j.obs.find((function(e){var n;return(null===(n=e.concept)||void 0===n?void 0:n.uuid)===(null==d?void 0:d.concept.uuid)}));e&&(y(e.uuid),h(!0))}}),[L,j,v,d]),(0,r.useEffect)((function(){var e,n,t=(e=function(){return function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e],r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(e){return v&&g&&(D(!0),P&&!K&&k(P),D(!1)),[2]}))},n=function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){O(o,r,a,i,l,"next",e)}function l(e){O(o,r,a,i,l,"throw",e)}i(void 0)}))},function(){return n.apply(this,arguments)});t()}),[v,g,P,K]),(0,r.useEffect)((function(){p((function(){return H}))}),[H,p]),F?a().createElement("div",{className:E.loaderContainer},a().createElement(s.OuH,{className:E.loader,description:m("loadingTestDetails","Loading test details")+"...",iconDescription:m("loading","Loading"),status:"active"})):a().createElement(s.lVW,{className:E.form},a().createElement("div",{className:E.grid},T.setMembers.length>0&&a().createElement("p",{className:E.heading},T.display),T&&a().createElement(s.BJc,{gap:5},x?a().createElement(s.OuH,{description:m("loadingInitialValues","Loading initial values")+"..."}):a().createElement(N,{defaultValue:$,concept:T,control:Y})),z&&a().createElement(s.jeF,{className:E.emptyFormError,lowContrast:!0,title:m("error","Error"),subtitle:m("pleaseFillField","Please fill at least one field")+"."})),a().createElement(s.Te$,{className:f?E.tablet:E.desktop},a().createElement(s.$nd,{className:E.button,kind:"secondary",disabled:U,onClick:n},m("discard","Discard")),a().createElement(s.$nd,{className:E.button,kind:"primary",onClick:J((function(){var e=Q(),n=Object.values(e).every((function(e){return""===e||null==e}));if(n)R(!0);else{var r=[];if(T.set&&T.setMembers.length>0){var a=[];T.setMembers.forEach((function(e){var n;"Numeric"===e.datatype.display||"Text"===e.datatype.display?n=Q()["".concat(e.uuid)]:"Coded"===e.datatype.display&&(n={uuid:Q()["".concat(e.uuid)]});var t={concept:{uuid:e.uuid},value:n,status:"FINAL",order:{uuid:d.uuid}};a.push(t)})),r.push({concept:{uuid:d.concept.uuid},status:"FINAL",order:{uuid:d.uuid},groupMembers:a})}else if(!T.set&&0===T.setMembers.length){var o;"Numeric"===T.datatype.display||"Text"===T.datatype.display?o=Q()["".concat(T.uuid)]:"Coded"===T.datatype.display&&(o={uuid:Q()["".concat(T.uuid)]}),r.push({concept:{uuid:d.concept.uuid},status:"FINAL",order:{uuid:d.uuid},value:o})}var i={obs:r},s={previousOrder:d.uuid,type:"testorder",action:"DISCONTINUE",careSetting:d.careSetting.uuid,encounter:d.encounter.uuid,patient:d.patient.uuid,concept:d.concept.uuid,orderer:d.orderer};(0,c.X1)(d.uuid,d.encounter.uuid,i,{fulfillerStatus:"COMPLETED",fulfillerComment:"Test Results Entered"},s,b).then((function(){t(),W(),(0,l.Tk)((function(e){return"string"==typeof e&&e.startsWith("".concat(u.restBaseUrl,"/order?patient=").concat(d.patient.uuid))}),void 0,{revalidate:!0}),(0,u.showSnackbar)({title:m("saveLabResults","Save lab results"),kind:"success",subtitle:m("successfullySavedLabResults","Lab results for {{orderNumber}} have been successfully updated",{orderNumber:null==d?void 0:d.orderNumber})})}),(function(e){(0,u.showSnackbar)({title:m("errorSavingLabResults","Error saving lab results"),kind:"error",subtitle:null==e?void 0:e.message})})),R(!1)}})),disabled:U,type:"submit"},U?a().createElement(s.OuH,{description:m("saving","Saving")+"..."}):m("saveAndClose","Save and close"))))}}}]);