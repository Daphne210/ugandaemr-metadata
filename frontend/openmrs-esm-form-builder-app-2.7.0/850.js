"use strict";(globalThis.webpackChunk_openmrs_esm_form_builder_app=globalThis.webpackChunk_openmrs_esm_form_builder_app||[]).push([[850],{41850:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var r=n(16072),i=n.n(r),a=n(53941),o=n(44906),l=n(84370),u=n(78122),s=n(92137),c=n(25987),d=n(43687),p=n(57626),m=n(77646),f=n(64945),v=n(56603),g=n(99130),y=n(91608);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}function T(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const q=function(e){var t,n,b,h,q,S,O,A,w,C,x,N,P,I,L,F,j,D,R,B,M,U,W,Q,_=e.closeModal,z=e.onSchemaChange,K=e.pageIndex,H=e.questionIndex,V=e.questionToEdit,$=e.schema,Y=e.sectionIndex,J=(0,a.useTranslation)().t,G=(0,c.useConfig)(),X=G.fieldTypes,Z=G.questionTypes,ee=k((0,r.useState)(!1),2),te=ee[0],ne=ee[1],re=k((0,r.useState)([]),2),ie=re[0],ae=re[1],oe=k((0,r.useState)(V.questionOptions.conceptMappings),2),le=oe[0],ue=oe[1],se=k((0,r.useState)(""),2),ce=se[0],de=se[1],pe=k((0,r.useState)(""),2),me=pe[0],fe=pe[1],ve=k((0,r.useState)(""),2),ge=ve[0],ye=ve[1],be=k((0,r.useState)(V.questionOptions.rendering),2),he=be[0],Ee=be[1],Te=k((0,r.useState)(!1),2),ke=Te[0],qe=Te[1],Se=k((0,r.useState)(""),2),Oe=Se[0],Ae=Se[1],we=k((0,r.useState)(""),2),Ce=we[0],xe=we[1],Ne=k((0,r.useState)(""),2),Pe=Ne[0],Ie=Ne[1],Le=k((0,r.useState)(""),2),Fe=Le[0],je=Le[1],De=k((0,r.useState)(null),2),Re=De[0],Be=De[1],Me=k((0,r.useState)(null!==(F=V.datePickerFormat)&&void 0!==F?F:"both"),2),Ue=Me[0],We=Me[1],Qe=k((0,r.useState)(""),2),_e=Qe[0],ze=Qe[1],Ke=k((0,r.useState)([]),2),He=Ke[0],Ve=Ke[1],$e=k((0,r.useState)(null),2),Ye=$e[0],Je=$e[1],Ge=(0,d.M)(ce),Xe=Ge.concepts,Ze=Ge.isLoadingConcepts,et=(j=V.questionOptions.concept,M="".concat(c.restBaseUrl,"/concept/").concat(j,"?v=").concat("custom:(name:(display))"),W=(U=(0,p.Ay)(j?M:null,c.openmrsFetch)).data,Q=U.error,{conceptName:null!==(B=null==W||null===(R=W.data)||void 0===R||null===(D=R.name)||void 0===D?void 0:D.display)&&void 0!==B?B:null,conceptNameLookupError:Q,isLoadingConceptName:j&&!W&&!Q||!1}),tt=et.conceptName,nt=et.conceptNameLookupError,rt=et.isLoadingConceptName,it=(0,m.d)().patientIdentifierTypes,at=(0,f.O)().personAttributeTypes,ot=function(e){var t,n="".concat(c.restBaseUrl,"/patientidentifiertype/").concat(e),r=(0,p.Ay)(e?n:null,c.openmrsFetch),i=r.data,a=r.error,o=r.isLoading;return{patientIdentifierType:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},conceptLookupError:a,isLoadingPatientIdentifierType:o}}(ge).patientIdentifierType,lt=function(e){var t,n="".concat(c.restBaseUrl,"/personattributetype?q=").concat(e,"&v=default"),r=(0,p.Ay)(e?n:null,c.openmrsFetch),i=r.data,a=r.error,o=r.isLoading;return{personAttributeType:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},personAttributeLookupError:a,isLoadingPersonAttributeType:o}}(me).personAttributeType,ut=k((0,r.useState)(ot),2),st=ut[0],ct=ut[1],dt=k((0,r.useState)(lt),2),pt=dt[0],mt=dt[1],ft=function(e){var t,n,r="".concat(c.restBaseUrl,"/patientidentifiertype/").concat(e),i=(0,p.Ay)(e?r:null,c.openmrsFetch),a=i.data,o=i.error,l=i.isLoading;return{patientIdentifierName:null!==(n=null==a||null===(t=a.data)||void 0===t?void 0:t.name)&&void 0!==n?n:null,patientIdentifierNameLookupError:o,isLoadingPatientidentifierName:l||!1}}(V.questionOptions.identifierType),vt=ft.patientIdentifierNameLookupError,gt=ft.isLoadingPatientidentifierName,yt=function(e){var t,n,r="".concat(c.restBaseUrl,"/personattributetype?q=").concat(e,"&v=default"),i=(0,p.Ay)(e?r:null,c.openmrsFetch),a=i.data,o=i.error,l=i.isLoading;return{personAttributeName:null!==(n=null==a||null===(t=a.data)||void 0===t?void 0:t.name)&&void 0!==n?n:null,personAttributeNameLookupError:o,isLoadingPersonAttributeName:l||!1}}(V.questionOptions.attributeType),bt=yt.personAttributeNameLookupError,ht=yt.isLoadingPersonAttributeName,Et=k((0,r.useState)(!1),2),Tt=Et[0],kt=Et[1],qt=k((0,r.useState)([]),2),St=qt[0],Ot=qt[1],At=k((0,r.useState)(null),2),wt=At[0],Ct=At[1],xt=k((0,r.useState)(null),2),Nt=xt[0],Pt=xt[1],It=(0,v.v5)(),Lt=It.programs,Ft=It.programsLookupError,jt=It.isLoadingPrograms,Dt=(0,v.D0)(null==Nt?void 0:Nt.uuid),Rt=Dt.programStates,Bt=Dt.programStatesLookupError,Mt=Dt.isLoadingProgramStates,Ut=Dt.mutateProgramStates,Wt=k((0,r.useState)([]),2),Qt=Wt[0],_t=Wt[1],zt=Ye&&(null==V?void 0:V.questionOptions.concept)&&(null==V||null===(t=V.questionOptions)||void 0===t?void 0:t.concept)!==(null==Ye?void 0:Ye.uuid),Kt=k((0,r.useState)(!1),2),Ht=Kt[0],Vt=Kt[1],$t={datetime:[{value:"both",label:J("calendarAndTimer","Calendar and timer"),defaultChecked:!0}],date:[{value:"calendar",label:J("calendarOnly","Calendar only"),defaultChecked:!1}],time:[{value:"timer",label:J("timerOnly","Timer only"),defaultChecked:!1}]},Yt=(0,r.useMemo)((function(){return(0,o.A)((function(e){return de(e)}),500)}),[]);return(0,r.useEffect)((function(){var e=Lt.find((function(e){return e.uuid===V.questionOptions.programUuid}));Ct(e)}),[Lt,V.questionOptions.programUuid]),(0,r.useEffect)((function(){var e=null==wt?void 0:wt.allWorkflows.find((function(e){return e.uuid===V.questionOptions.workflowUuid}));Pt(e),_t(null==wt?void 0:wt.allWorkflows)}),[V.questionOptions.workflowUuid,wt]),(0,r.useEffect)((function(){var e=null==Nt?void 0:Nt.states.filter((function(e){return V.questionOptions.answers.some((function(t){return t.value===e.uuid}))}));Ot(e)}),[Nt,V.questionOptions.answers]),i().createElement(i().Fragment,null,i().createElement(u.rQ0,{className:y.A.modalHeader,closeModal:_,title:J("editQuestion","Edit question")}),i().createElement(u.lVW,{className:y.A.form,onSubmit:function(e){return e.preventDefault()}},i().createElement(u.cwr,{hasScrollingContent:!0},i().createElement(u.BJc,{gap:5},i().createElement(u.ksK,{defaultValue:V.label,id:V.id,labelText:J("questionLabel","Label"),onChange:function(e){return je(e.target.value)},required:!0}),i().createElement(u.ksK,{defaultValue:V.id,id:"questionId",invalid:function(e){var t;if((null==V?void 0:V.id)===e)return!1;var n=null==$||null===(t=$.pages)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.sections)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.questions)||void 0===t?void 0:t.map((function(e){return e.id}))}))}));return(0,l.A)(n).includes(e)}(Pe),invalidText:J("questionIdExists","This question ID already exists in your schema"),labelText:J("questionId","Question ID (prefer using camel-case for IDs). Each field should have a unique ID."),onChange:function(e){return Ie(e.target.value)},placeholder:J("questionIdPlaceholder",'Enter a unique ID e.g. "anaesthesiaType" for a question asking about the type of anaesthesia.'),required:!0}),i().createElement(u.zWQ,{defaultSelected:/true/.test(null==V||null===(n=V.required)||void 0===n?void 0:n.toString())?"required":"optional",name:"isQuestionRequired",legendText:J("isQuestionRequiredOrOptional","Is this question a required or optional field? Required fields must be answered before the form can be submitted.")},i().createElement(u.aaP,{id:"questionIsNotRequired",defaultChecked:!0,labelText:J("optional","Optional"),onClick:function(){return qe(!1)},value:"optional"}),i().createElement(u.aaP,{id:"questionIsRequired",defaultChecked:!1,labelText:J("required","Required"),onClick:function(){return qe(!0)},value:"required"})),i().createElement(u.l6P,{defaultValue:V.type,onChange:function(e){return Be(e.target.value)},id:"questionType",invalidText:J("typeRequired","Type is required"),labelText:J("questionType","Question type"),required:!0},!Re&&i().createElement(u.ebT,{text:J("chooseQuestionType","Choose a question type"),value:""}),Z.map((function(e,t){return i().createElement(u.ebT,{text:e,value:e,key:t})}))),i().createElement(u.l6P,{defaultValue:V.questionOptions.rendering,onChange:function(e){return Ee(e.target.value)},id:"renderingType",invalidText:J("validFieldTypeRequired","A valid field type value is required"),labelText:J("renderingType","Rendering type"),required:!0},!he&&i().createElement(u.ebT,{text:J("chooseRenderingType","Choose a rendering type"),value:""}),X.map((function(e,t){return i().createElement(u.ebT,{text:e,value:e,key:t})}))),"number"===he?i().createElement(i().Fragment,null,i().createElement(u.ksK,{id:"min",labelText:"Min",value:Ce||"",onChange:function(e){return xe(e.target.value)},required:!0}),i().createElement(u.ksK,{id:"max",labelText:"Max",value:Oe||"",onChange:function(e){return Ae(e.target.value)},required:!0})):"textarea"===he?i().createElement(u.ksK,{id:"textAreaRows",labelText:J("rows","Rows"),value:_e||"",onChange:function(e){return ze(e.target.value)},required:!0}):null,"patientIdentifier"===V.type&&i().createElement("div",null,i().createElement(u.lRv,{className:y.A.label},J("searchForBackingPatientIdentifierType","Search for a backing patient identifier type")),vt?i().createElement(u.jeF,{kind:"error",lowContrast:!0,className:y.A.error,title:J("errorFetchingPatientIdentifierTypes","Error fetching patient identifier types"),subtitle:J("pleaseTryAgain","Please try again.")}):null,gt?i().createElement(u.OuH,{className:y.A.loader,description:J("loading","Loading")+"..."}):i().createElement(u.a32,{id:"patientIdentifierTypeLookup",items:it,itemToString:function(e){return null==e?void 0:e.display},onChange:function(e){var t;t=e.selectedItem,ye(""),ct(t)},placeholder:J("choosePatientIdentifierType","Choose a patient identifier type"),initialSelectedItem:it.find((function(e){var t;return(null==e?void 0:e.uuid)===(null===(t=V.questionOptions)||void 0===t?void 0:t.identifierType)}))})),"personAttribute"===V.type&&i().createElement("div",null,i().createElement(u.lRv,{className:y.A.label},J("searchForBackingPersonAttributeType","Search for a backing person attribute type")),bt?i().createElement(u.jeF,{kind:"error",lowContrast:!0,className:y.A.error,title:J("errorFetchingPersonAttributeTypes","Error fetching person attribute types"),subtitle:J("pleaseTryAgain","Please try again.")}):null,ht?i().createElement(u.OuH,{className:y.A.loader,description:J("loading","Loading")+"..."}):i().createElement(u.a32,{id:"personAttributeTypeLookup",items:at,itemToString:function(e){return null==e?void 0:e.display},onChange:function(e){var t;t=e.selectedItem,fe(""),mt(t)},placeholder:J("choosePersonAttributeType","Choose a person attribute type"),initialSelectedItem:at.find((function(e){var t;return(null==e?void 0:e.uuid)===(null===(t=V.questionOptions)||void 0===t?void 0:t.attributeType)}))})),"programState"===V.type&&i().createElement(u.BJc,{gap:5},jt&&i().createElement(u.aB4,null),Ft?i().createElement(u.jeF,{kind:"error",lowContrast:!0,className:y.A.error,title:J("errorFetchingPrograms","Error fetching programs"),subtitle:J("pleaseTryAgain","Please try again.")}):null,Lt&&i().createElement(u.a32,{id:"programLookup",items:Lt,itemToString:function(e){return null==e?void 0:e.name},onChange:function(e){var t;t=e.selectedItem,Ct(t),_t(null==t?void 0:t.allWorkflows)},placeholder:J("addProgram","Add program"),selectedItem:wt,titleText:J("program","Program")}),wt&&i().createElement(u.a32,{id:"programWorkflowLookup",items:Qt,itemToString:function(e){var t,n;return null!==(n=null==e||null===(t=e.concept)||void 0===t?void 0:t.display)&&void 0!==n?n:""},onChange:function(e){return t=e.selectedItem,Pt(t),void Ut();var t},placeholder:J("addProgramWorkflow","Add program workflow"),selectedItem:Nt,titleText:J("programWorkflow","Program workflow")}),Nt&&i().createElement(i().Fragment,null,Mt&&i().createElement(u.aB4,null),Bt&&i().createElement(u.jeF,{kind:"error",lowContrast:!0,className:y.A.error,title:J("errorFetchingProgramState","Error fetching program state"),subtitle:J("pleaseTryAgain","Please try again.")}),(null==Rt?void 0:Rt.length)>0&&i().createElement(u.KFt,{titleText:J("programState","Program state"),id:"programState",items:Rt,itemToString:function(e){var t;return e?null==e||null===(t=e.concept)||void 0===t?void 0:t.display:""},selectionFeedback:"top-after-reopen",onChange:function(e){return Ot(e.selectedItems)},selectedItems:St}),i().createElement("div",null,null==St?void 0:St.map((function(e){var t;return i().createElement(u.vwO,{className:y.A.tag,key:null==e?void 0:e.uuid,type:"blue"},null==e||null===(t=e.concept)||void 0===t?void 0:t.display)}))))),"ui-select-extended"!==he&&"encounterDatetime"!==V.type&&("obs"===Re||!Re&&"obs"===V.type)&&i().createElement(i().Fragment,null,i().createElement("div",null,i().createElement(u.lRv,{className:y.A.label},J("searchForBackingConcept","Search for a backing concept")),nt?i().createElement(u.jeF,{kind:"error",lowContrast:!0,className:y.A.error,title:J("errorFetchingConceptName","Couldn't resolve concept name"),subtitle:J("conceptDoesNotExist","The linked concept '{{conceptName}}' does not exist in your dictionary",{conceptName:V.questionOptions.concept})}):null,rt?i().createElement(u.OuH,{className:y.A.loader,description:J("loading","Loading")+"..."}):i().createElement(i().Fragment,null,i().createElement(u.vji,{defaultValue:tt,id:"conceptLookup",onClear:function(){Je(null),We("both")},onChange:function(e){var t,n;(n=null===(t=e.target.value)||void 0===t?void 0:t.trim())&&Yt(n)},placeholder:J("searchConcept","Search using a concept name or UUID"),required:!0,size:"md",value:null==Ye?void 0:Ye.display}),ce?Ze?i().createElement(u.OuH,{className:y.A.loader,description:J("searching","Searching")+"..."}):(null==Xe?void 0:Xe.length)&&!Ze?i().createElement("ul",{className:y.A.conceptList},null==Xe?void 0:Xe.map((function(e,t){return i().createElement("li",{role:"menuitem",className:y.A.concept,key:t,onClick:function(){return function(e){var t,n,r,i=(0,g.getDatePickerType)(e);i&&We(i),de(""),Ve([]),Je(e),ue(null==e||null===(t=e.mappings)||void 0===t?void 0:t.map((function(e){var t=e.display.split(": ");return{relationship:e.conceptMapType.display,type:t[0],value:t[1]}}))),ae(null!==(r=null==e||null===(n=e.answers)||void 0===n?void 0:n.map((function(e){return{concept:null==e?void 0:e.uuid,label:null==e?void 0:e.display}})))&&void 0!==r?r:[])}(e)}},e.display)}))):i().createElement(u.Wdr,null,i().createElement(u.FAs,{className:y.A.emptyResults},i().createElement("span",null,J("noMatchingConcepts","No concepts were found that match")," ",i().createElement("strong",null,'"',ce,'".'))),i().createElement("div",{className:y.A.oclLauncherBanner},i().createElement("p",{className:y.A.bodyShort01},J("conceptSearchHelpText","Can't find a concept?")),i().createElement("a",{className:y.A.oclLink,target:"_blank",rel:"noopener noreferrer",href:"https://app.openconceptlab.org/"},J("searchInOCL","Search in OCL"),i().createElement(s.F1,{size:16})))):null)),i().createElement(u.BJc,{gap:5},!zt&&(null==V||null===(b=V.questionOptions.answers)||void 0===b?void 0:b.length)&&"programState"!==V.type?i().createElement(u.KFt,{className:y.A.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},initialSelectedItems:null==V||null===(q=V.questionOptions)||void 0===q||null===(h=q.answers)||void 0===h?void 0:h.map((function(e){return{id:e.concept,text:e.label}})),items:null==V||null===(O=V.questionOptions)||void 0===O||null===(S=O.answers)||void 0===S?void 0:S.map((function(e){var t;return{id:e.concept,text:null!==(t=e.label)&&void 0!==t?t:""}})),onChange:function(e){var t=e.selectedItems;ne(!0),Ve(t.sort())},size:"md",titleText:J("selectAnswersToDisplay","Select answers to display")}):null,zt||!(null==V||null===(w=V.questionOptions)||void 0===w||null===(A=w.answers)||void 0===A?void 0:A.length)||te||"programState"===V.type?null:i().createElement("div",null,null==V||null===(x=V.questionOptions)||void 0===x||null===(C=x.answers)||void 0===C?void 0:C.map((function(e){return i().createElement(u.vwO,{className:y.A.tag,key:null==e?void 0:e.concept,type:"blue"},null==e?void 0:e.label)}))),zt&&ie.length?i().createElement(u.KFt,{className:y.A.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},items:ie.map((function(e){return{id:e.concept,text:e.label}})),onChange:function(e){var t=e.selectedItems;return Ve(t.sort())},size:"md",titleText:J("selectAnswersToDisplay","Select answers to display")}):null,(null!=zt?zt:te)&&i().createElement("div",null,He.map((function(e){return i().createElement(u.vwO,{className:y.A.tag,key:e.id,type:"blue"},e.text)}))),i().createElement(u.zWQ,{defaultSelected:/true/.test(null==V||null===(P=V.questionOptions)||void 0===P||null===(N=P.showComment)||void 0===N?void 0:N.toString())?"yes":"no",name:"addObsComment",legendText:J("addObsCommentTextBox","Add obs comment text box")},i().createElement(u.aaP,{id:"obsCommentYes",defaultChecked:!0,labelText:J("yes","Yes"),onClick:function(){return kt(!0)},value:"yes"}),i().createElement(u.aaP,{id:"obsCommentNo",defaultChecked:!1,labelText:J("no","No"),onClick:function(){return kt(!1)},value:"no"})),i().createElement(u.zWQ,{defaultSelected:/true/.test(null==V||null===(L=V.questionOptions)||void 0===L||null===(I=L.showDate)||void 0===I?void 0:I.toString())?"yes":"no",name:"addInlineDate",legendText:J("addInlineDate","Add inline date")},i().createElement(u.aaP,{id:"inlineDateYes",defaultChecked:!0,labelText:J("yes","Yes"),onClick:function(){return Vt(!0)},value:"yes"}),i().createElement(u.aaP,{id:"inlineDateNo",defaultChecked:!1,labelText:J("no","No"),onClick:function(){return Vt(!1)},value:"no"})))),"date"===he||"datetime"===he?i().createElement(u.zWQ,{name:"datePickerType",legendText:J("datePickerType","The type of date picker to show")},Ye&&Ye.datatype?$t[Ye.datatype.name.toLowerCase()].map((function(e){return i().createElement(u.aaP,{id:e.value,labelText:e.label,onClick:function(){return We(e.value)},checked:Ue===e.value,value:e.value})})):Object.values($t).flat().map((function(e){return i().createElement(u.aaP,{id:e.value,checked:Ue===e.value,labelText:e.label,onClick:function(){return We(e.value)},value:e.value})}))):null)),i().createElement(u.jlY,null,i().createElement(u.$nd,{onClick:_,kind:"secondary"},J("cancel","Cancel")),i().createElement(u.$nd,{onClick:function(){!function(e){var t,n,r;r=!zt&&(null==He?void 0:He.length)?He.map((function(e){return{concept:e.id,label:e.text}})):zt&&0===ie.length?[]:zt&&(null==ie?void 0:ie.length)>0&&(null==He?void 0:He.length)?(null==He?void 0:He.length)?He.map((function(e){return{concept:e.id,label:e.text}})):V.questionOptions.answers:"programState"===V.type?St.map((function(e){return{value:e.uuid,label:e.concept.display}})):V.questionOptions.answers;try{var i,a=T(E({label:Fe||V.label,type:Re||V.type,required:ke||/true/.test(null==V||null===(i=V.required)||void 0===i?void 0:i.toString()),id:Pe||V.id},(he&&("date"===he||"datetime"===he)||"date"===V.questionOptions.rendering||"datetime"===V.questionOptions.rendering)&&{datePickerFormat:Ue}),{questionOptions:E(T(E(T(E({rendering:he||V.questionOptions.rendering},(Ye||V.questionOptions.concept)&&{concept:Ye?Ye.uuid:V.questionOptions.concept,conceptMappings:(null==le?void 0:le.length)?le:V.questionOptions.conceptMappings}),{answers:r}),"patientIdentifier"===Re&&{identifierType:st?st.uuid:V.questionOptions.identifierType},Tt&&{showComment:Tt||/true/.test(V.questionOptions.showComment.toString())},Ht&&{showDate:Ht||/true/.test(V.questionOptions.showDate.toString())}),{attributeType:pt?pt.uuid:V.questionOptions.attributeType}),wt&&{programUuid:wt.uuid},Nt&&{workflowUuid:Nt.uuid})});$.pages[K].sections[Y].questions[e]=a,z(E({},$)),je(""),Ie(""),qe(!1),Be(null),Ee(null),Je(null),ue([]),Ve([]),kt(!1),Vt(!1),(0,c.showSnackbar)({title:J("questionEdited","Question edited"),kind:"success",isLowContrast:!0,subtitle:J("questionEditedMessage",'The question labelled "{{- questionLabel}}" has been edited.',{questionLabel:V.label})})}catch(e){t=e,(null!=(n=Error)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)&&(0,c.showSnackbar)({title:J("errorUpdatingQuestion","Error updating question"),kind:"error",subtitle:null==e?void 0:e.message})}_()}(H)}},i().createElement("span",null,J("save","Save"))))))}},44906:(e,t,n)=>{n.d(t,{A:()=>b});var r=n(23149),i=n(41917);const a=function(){return i.A.Date.now()};var o=/\s/;var l=/^\s+/;const u=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&o.test(e.charAt(t)););return t}(e)+1).replace(l,""):e};var s=n(88496),c=n(53098);var d=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,m=/^0o[0-7]+$/i,f=parseInt;const v=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||(0,c.A)(e)&&"[object Symbol]"==(0,s.A)(e)}(e))return NaN;if((0,r.A)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,r.A)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=u(e);var n=p.test(e);return n||m.test(e)?f(e.slice(2),n?2:8):d.test(e)?NaN:+e};var g=Math.max,y=Math.min;const b=function(e,t,n){var i,o,l,u,s,c,d=0,p=!1,m=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=i,r=o;return i=o=void 0,d=t,u=e.apply(r,n)}function h(e){var n=e-c;return void 0===c||n>=t||n<0||m&&e-d>=l}function E(){var e=a();if(h(e))return T(e);s=setTimeout(E,function(e){var n=t-(e-c);return m?y(n,l-(e-d)):n}(e))}function T(e){return s=void 0,f&&i?b(e):(i=o=void 0,u)}function k(){var e=a(),n=h(e);if(i=arguments,o=this,c=e,n){if(void 0===s)return function(e){return d=e,s=setTimeout(E,t),p?b(e):u}(c);if(m)return clearTimeout(s),s=setTimeout(E,t),b(c)}return void 0===s&&(s=setTimeout(E,t)),u}return t=v(t)||0,(0,r.A)(n)&&(p=!!n.leading,l=(m="maxWait"in n)?g(v(n.maxWait)||0,t):l,f="trailing"in n?!!n.trailing:f),k.cancel=function(){void 0!==s&&clearTimeout(s),d=0,i=c=o=s=void 0},k.flush=function(){return void 0===s?u:T(a())},k}},23149:(e,t,n)=>{n.d(t,{A:()=>r});const r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}}]);