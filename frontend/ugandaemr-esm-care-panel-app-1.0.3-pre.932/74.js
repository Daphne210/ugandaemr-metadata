"use strict";(globalThis.webpackChunk_ugandaemr_esm_care_panel_app=globalThis.webpackChunk_ugandaemr_esm_care_panel_app||[]).push([[74],{7147:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(6757),r=a.n(n),o=a(786),s=a.n(o)()(r());s.push([e.id,".-esm-care-panel__care-programs__careProgramButtonContainer___UooeY{display:flex;justify-content:space-between;width:100%;align-items:center}","",{version:3,sources:["webpack://./src/care-programs/care-programs.scss"],names:[],mappings:"AAIA,oEACE,YAAA,CACA,6BAAA,CACA,UAAA,CACA,kBAAA",sourcesContent:["@use '@carbon/styles/scss/type';\n@use '@carbon/styles/scss/spacing';\n@use '@carbon/colors';\n\n.careProgramButtonContainer {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  align-items: center;\n}"],sourceRoot:""}]),s.locals={careProgramButtonContainer:"-esm-care-panel__care-programs__careProgramButtonContainer___UooeY"};const i=s},7074:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var n=a(5206),r=a.n(n),o=a(2942),s=a(3238),i=a(7631),l=a(2450),c=a(4924),m=a(3255),u=a(1e3),d=a(2108),p=a.n(d),g=a(1354),v=a.n(g),f=a(1583),E=a.n(f),A=a(7378),C=a.n(A),_=a(5993),h=a.n(_),y=a(4154),P=a.n(y),b=a(8141),S=a.n(b),k=a(7147),w={};w.styleTagTransform=S(),w.setAttributes=h(),w.insert=C().bind(null,"head"),w.domAPI=E(),w.insertStyleElement=P(),v()(k.Z,w);const D=k.Z&&k.Z.locals?k.Z.locals:void 0,T=function(e){var t=e.patientUuid,a=(0,c.useTranslation)().t,d=(0,u.useVisit)(t).currentVisit,g=function(e){var t,a,n,r="/ws/rest/v1/ugandaemr/patientCohorts?patientUuid=".concat(e),o=(0,m.ZP)(r,u.openmrsFetch),s=o.data,i=o.error,l=o.isLoading,c=o.isValidating;return{carePrograms:null!==(n=null===(a=s)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.filter((function(e){return"active"!==e.enrollmentStatus})))&&void 0!==n?n:[],error:i,isLoading:l,isValidating:c}}(t),v=g.carePrograms,f=g.isLoading,E=g.isValidating,A=g.error,C="tablet"===(0,u.useLayoutType)(),_=(0,n.useCallback)((function(e){var t="active"===e.enrollmentStatus,a=t?e.discontinuationFormUuid:e.enrollmentFormUuid,n="".concat(e.display,t?" Discontinuation form":" Enrollment form");d?(0,l.launchPatientWorkspace)("patient-form-entry-workspace",{workspaceTitle:n,mutateForm:function(){(0,m.JG)((function(e){return!0}),void 0,{revalidate:!0})},formInfo:{encounterUuid:"",formUuid:a,additionalProps:{enrollmentDetails:e.enrollmentDetails}}}):(0,l.launchStartVisitPrompt)()}),[d]),h=(0,n.useMemo)((function(){return v.map((function(e){var t;return{id:"".concat(e.uuid),programName:e.display,status:r().createElement("div",{className:D.careProgramButtonContainer},r().createElement("span",null,p()("".concat(e.enrollmentStatus," ").concat((null===(t=e.enrollmentDetails)||void 0===t?void 0:t.dateEnrolled)&&"active"===e.enrollmentStatus?"Since (".concat((0,u.formatDate)(new Date(e.enrollmentDetails.dateEnrolled)),")"):""))),r().createElement(o.zxk,{size:"sm",className:"cds--btn--sm cds--layout--size-sm",kind:"active"==e.enrollmentStatus?"danger--ghost":"ghost",iconDescription:"Dismiss",onClick:function(){return _(e)},renderIcon:"active"==e.enrollmentStatus?s.x8:i.kb},"active"==e.enrollmentStatus?"Discontinue":"Enroll"))}}))}),[v,_]);return f?r().createElement(o.lSo,{status:"active",iconDescription:a("loading","Loading"),description:a("loadingDescription","Loading data...")}):A?r().createElement(l.ErrorState,{headerTitle:a("errorCarePrograms","Care programs"),error:A}):0===v.length?r().createElement(l.EmptyState,{headerTitle:a("careProgram","Care program"),displayText:a("careProgram","care program")}):r().createElement(o.n9L,null,r().createElement(l.CardHeader,{title:a("carePrograms","Care Programs")},E&&r().createElement(o.lSo,{status:"active",iconDescription:a("validating","Loading"),description:a("validating","Validating data...")})),r().createElement(o.wQF,{size:C?"lg":"sm",useZebraStyles:!0,rows:h,headers:[{key:"programName",header:"Program name"},{key:"status",header:"Status"}]},(function(e){var t=e.rows,a=e.headers,n=e.getTableProps,s=e.getHeaderProps,i=e.getRowProps;return r().createElement(o.xJi,null,r().createElement(o.iA_,n(),r().createElement(o.ssF,null,r().createElement(o.SCH,null,a.map((function(e){return r().createElement(o.xDH,s({header:e}),e.header)})))),r().createElement(o.RMI,null,t.map((function(e){return r().createElement(o.SCH,i({row:e}),e.cells.map((function(e){return r().createElement(o.pj1,{key:e.id},e.value)})))})))))})))}}}]);